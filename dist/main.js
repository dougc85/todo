(()=>{"use strict";const e={renderProjects(e){const t=document.querySelector(".project-container");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach((e=>{const s=document.createElement("div");s.classList.add("project"),s.dataset.id=e.id;const n=document.createElement("div");n.classList.add("edit-project"),n.textContent="Edit",n.addEventListener("click",e.edit.bind(e));const d=document.createElement("div");d.classList.add("delete-project"),d.textContent="x",d.addEventListener("click",e.delete.bind(e));const a=document.createElement("p");a.classList.add("project-paragraph"),a.textContent=e.name,e.selected?a.addEventListener("click",e.close.bind(e)):a.addEventListener("click",e.open.bind(e,s,a)),e.selected&&(n.classList.add("project-selected"),d.classList.add("project-selected"),s.classList.add("project-selected")),s.appendChild(n),s.appendChild(d),s.appendChild(a),t.appendChild(s)}));const s=document.createElement("div");s.classList.add("margin-fixer-projects"),s.textContent="margin",t.appendChild(s)},renderTasks(e){const t=document.querySelector(".task-container");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach((e=>{const s=document.createElement("div");s.classList.add("task-wrapper");const n=document.createElement("div");n.classList.add("green-screen"),e.active&&n.classList.add("hidden");const d=document.createElement("div");d.classList.add("task");const a=document.createElement("div");a.classList.add("edit-task"),a.textContent="Edit",a.addEventListener("click",e.edit.bind(e));const i=document.createElement("div");i.classList.add("delete-task"),i.textContent="Delete",i.addEventListener("click",e.delete.bind(e));const c=document.createElement("div");c.classList.add("checkbox");const l=document.createElement("div");l.classList.add("x"),l.innerHTML='<img src="check.png">',console.log(l),e.active&&l.classList.add("hidden"),c.appendChild(l),c.addEventListener("click",e.activeSwitch.bind(e,n,l));const o=document.createElement("div");o.classList.add("item-containers","title-descr-container");const r=document.createElement("h4");r.classList.add("top-task"),r.textContent=e.name,o.appendChild(r);const u=document.createElement("p");u.classList.add("bottom-task"),u.textContent=e.description,o.appendChild(u);const v=document.createElement("div");v.classList.add("item-containers","due-container");const m=document.createElement("div");m.classList.add("date","top-task"),m.textContent=e.due,v.appendChild(m);const p=document.createElement("p");p.classList.add("bottom-task","due-p"),p.textContent="Due",v.appendChild(p);const h=document.createElement("div");h.classList.add("item-containers","priority-container");const L=document.createElement("div");L.classList.add("priority","top-task",`priority-${e.priority}`),h.appendChild(L);const k=document.createElement("p");k.classList.add("bottom-task","priority-p"),k.textContent=e.priority[0].toUpperCase()+e.priority.slice(1),h.appendChild(k),d.appendChild(a),d.appendChild(i),d.appendChild(c),d.appendChild(o),d.appendChild(v),d.appendChild(h),s.appendChild(n),s.appendChild(d),t.appendChild(s)}));const s=document.createElement("div");s.classList.add("margin-fixer-tasks"),s.textContent="margin",t.appendChild(s)}},t=document.querySelector(".screen-cover"),s=document.querySelector(".project-form"),n=document.querySelector(".task-form"),d=document.querySelector(".project-input"),a=document.querySelector(".name-input"),i=document.querySelector(".description-input"),c=document.querySelector(".due-input"),l=document.querySelector(".priority-input"),o=document.querySelector(".add-project"),r=document.querySelector(".add-task");let u,v,m=[],p=0,h="";const L=n=>(p+=1,C.bind(void 0),{name:n,tasks:[],selected:!0,id:p,delete(){let t=m.indexOf(this);m.splice(t,1),e.renderProjects(m),h.id===this.id&&(h="",0===m.length?document.querySelector(".tasks-header").innerHTML="Start by adding a project.<br> You must have a project selected in order to add tasks.":document.querySelector(".tasks-header").textContent="Select Project to View or Add Tasks",e.renderTasks([]))},edit(){u=C.bind(this),d.value=this.name,t.classList.toggle("hidden"),s.classList.toggle("hidden"),document.addEventListener("keydown",u),document.addEventListener("click",j)},open(t,s){t.removeChild(s),m.forEach((e=>{e.selected&&e.close()}));const n=document.createElement("p");n.classList.add("project-paragraph"),n.textContent=this.name,n.addEventListener("click",this.close.bind(this)),t.appendChild(n),t.classList.add("project-selected"),t.firstChild.classList.add("project-selected"),t.firstChild.nextSibling.classList.add("project-selected"),this.selected=!0,h=this,document.querySelector(".tasks-header").textContent=this.name+" - Tasks",e.renderTasks(this.tasks)},close(){const t=document.querySelector(`[data-id='${this.id}']`);let s=t.querySelector(".project-paragraph");t.removeChild(s);const n=document.createElement("p");n.classList.add("project-paragraph"),n.textContent=this.name,n.addEventListener("click",this.open.bind(this,t,n)),t.appendChild(n),t.classList.remove("project-selected"),t.firstChild.classList.remove("project-selected"),t.firstChild.nextSibling.classList.remove("project-selected"),this.selected=!1,h="",document.querySelector(".tasks-header").textContent="Select Project to View or Add Tasks",e.renderTasks([])}}),k=(s,d,o,r,m,p,L,k,g)=>({due:r,month:p,day:L,year:k,inputDateFormat:g,project:s,name:d,description:o,priority:m,active:!0,activeSwitch(t,s){this.active=!this.active,t.classList.toggle("hidden"),s.classList.toggle("hidden"),y(h.tasks),e.renderTasks(h.tasks)},delete(){let t=h.tasks.indexOf(this);h.tasks.splice(t,1),e.renderTasks(h.tasks)},edit(){u=x.bind(this),v=w.bind(this),a.value=this.name,i.value=this.description,c.value=this.inputDateFormat,l.value=this.priority,t.classList.toggle("hidden"),n.classList.toggle("hidden"),document.addEventListener("keydown",u),document.addEventListener("click",v)}}),g=e=>{e.sort(((e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1))},E={lowest:1,low:2,medium:3,high:4,highest:5},y=e=>{e.sort(((e,t)=>e.active!==t.active?e.active?-1:1:E[e.priority]!==E[t.priority]?E[t.priority]-E[e.priority]:e.due===t.due?e.name.toLowerCase()<t.name.toLowerCase()?-1:1:e.year!==t.year?parseInt(e.year)-parseInt(t.year):e.month!==t.month?e.month-t.month:e.day!==t.day?e.day-t.day:void 0))};function C(n){if("Enter"===n.key){document.removeEventListener("click",j),document.removeEventListener("keydown",u),t.classList.toggle("hidden"),s.classList.toggle("hidden");let n=m.indexOf(this);m[n].name=d.value,g(m),e.renderProjects(m),d.value=""}else"Escape"===n.key&&(document.removeEventListener("click",j),document.removeEventListener("keydown",u),t.classList.toggle("hidden"),s.classList.toggle("hidden"),d.value="")}const f=n=>{if("Enter"===n.key){if(console.log(d.value),""===d.value)return;document.removeEventListener("click",j),document.removeEventListener("keydown",f),t.classList.toggle("hidden"),s.classList.toggle("hidden");const n=L(d.value);h=n,m.forEach((e=>{e.selected=!1})),m.push(n),g(m),document.querySelector(".tasks-header").textContent=n.name+" - Tasks",e.renderProjects(m),d.value="",e.renderTasks(n.tasks)}else"Escape"===n.key&&(document.removeEventListener("click",j),document.removeEventListener("keydown",f),t.classList.toggle("hidden"),s.classList.toggle("hidden"),d.value="")},j=e=>{e.target===t&&(document.removeEventListener("click",j),document.removeEventListener("keydown",f),t.classList.toggle("hidden"),s.classList.toggle("hidden"),d.value="")};function x(s){if("Enter"===s.key){if(s.preventDefault(),""===a.value||""===i.value||""===c.value||"select one"===l.value)return;document.removeEventListener("keydown",u),document.removeEventListener("click",v),t.classList.toggle("hidden"),n.classList.toggle("hidden");const d=c.value.slice(2,4),o="0"===c.value[5]?c.value.slice(6,7):c.value.slice(5,7),r="0"===c.value[8]?c.value.slice(9):c.value.slice(8);let m=h.tasks.indexOf(this),p=h.tasks[m];p.name=a.value,p.description=i.value,p.due=o+"/"+r+"/"+d,p.day=r,p.month=o,p.year=d,p.inputDateFormat=c.value,p.priority=l.value,y(h.tasks),a.value="",i.value="",c.value="",l.value="select one",e.renderTasks(h.tasks)}else"Escape"===s.key&&(document.removeEventListener("click",v),document.removeEventListener("keydown",u),t.classList.toggle("hidden"),n.classList.toggle("hidden"),a.value="",i.value="",c.value="",l.value="select one")}function w(s){if(s.preventDefault(),s.target===document.querySelector(".submit-button")){if(""===a.value||""===i.value||""===c.value||"select one"===l.value)return;document.removeEventListener("keydown",u),document.removeEventListener("click",v),t.classList.toggle("hidden"),n.classList.toggle("hidden");const s=c.value.slice(2,4),d="0"===c.value[5]?c.value.slice(6,7):c.value.slice(5,7),o="0"===c.value[8]?c.value.slice(9):c.value.slice(8);let r=h.tasks.indexOf(this),m=h.tasks[r];m.name=a.value,m.description=i.value,m.due=d+"/"+o+"/"+s,m.day=o,m.month=d,m.year=s,m.inputDateFormat=c.value,m.priority=l.value,y(h.tasks),a.value="",i.value="",c.value="",l.value="select one",e.renderTasks(h.tasks)}else s.target===t&&(document.removeEventListener("click",v),document.removeEventListener("keydown",u),t.classList.toggle("hidden"),n.classList.toggle("hidden"),a.value="",i.value="",c.value="",l.value="select one")}const S=s=>{if("Enter"===s.key){if(s.preventDefault(),""===a.value||""===i.value||""===c.value||"select one"===l.value)return;document.removeEventListener("click",b),document.removeEventListener("keydown",S),t.classList.toggle("hidden"),n.classList.toggle("hidden");const d=c.value.slice(2,4),o="0"===c.value[5]?c.value.slice(6,7):c.value.slice(5,7),r="0"===c.value[8]?c.value.slice(9):c.value.slice(8),u=k(h.id,a.value,i.value,o+"/"+r+"/"+d,l.value,o,r,d,c.value);h.tasks.push(u),y(h.tasks),a.value="",i.value="",c.value="",l.value="select one",e.renderTasks(h.tasks)}else"Escape"===s.key&&(document.removeEventListener("click",b),document.removeEventListener("keydown",S),t.classList.toggle("hidden"),n.classList.toggle("hidden"),a.value="",i.value="",c.value="",l.value="select one")},b=s=>{if(s.preventDefault(),s.target===document.querySelector(".submit-button")){if(""===a.value||""===i.value||""===c.value||"select one"===l.value)return;document.removeEventListener("click",b),document.removeEventListener("keydown",S),t.classList.toggle("hidden"),n.classList.toggle("hidden");const s=c.value.slice(2,4),d="0"===c.value[5]?c.value.slice(6,7):c.value.slice(5,7),o="0"===c.value[8]?c.value.slice(9):c.value.slice(8),r=k(h.id,a.value,i.value,d+"/"+o+"/"+s,l.value,d,o,s,c.value);h.tasks.push(r),y(h.tasks),a.value="",i.value="",c.value="",l.value="select one",e.renderTasks(h.tasks)}else s.target===t&&(document.removeEventListener("click",b),document.removeEventListener("keydown",S),t.classList.toggle("hidden"),n.classList.toggle("hidden"),a.value="",i.value="",c.value="",l.value="select one")};o.addEventListener("click",(e=>{t.classList.toggle("hidden"),s.classList.toggle("hidden"),document.addEventListener("keydown",f),document.addEventListener("click",j)})),r.addEventListener("click",(e=>{""!==h&&(t.classList.toggle("hidden"),n.classList.toggle("hidden"),document.addEventListener("keydown",S),document.addEventListener("click",b))}))})();